# 文章管理系统功能模块图及功能说明

## 系统功能模块图

```
┌─────────────────────────────────────────────────────────────┐
│                     文章管理系统                              │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   文章创建模块   │  │   文章查询模块   │  │   文章编辑模块   │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   文章删除模块   │  │   文章审核模块   │  │   文章互动模块   │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                          数据层                               │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   ArticleMapper │  │   UserService   │  │  CacheService   │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 功能说明

### 1、文章创建功能：
**接口：** POST /api/articles/new
**功能描述：** 用户可以创建新文章，包括标题、内容、分类、标签等信息
**主要特性：**
- 支持文章标题和内容的验证
- 支持设置文章分类和标签
- 支持草稿和发布状态
- 自动记录创建时间和作者信息
- 包含安全验证，确保用户身份真实性

### 2、文章查看功能：
**接口：** GET /api/articles/{id}
**功能描述：** 用户可以根据文章ID查看具体的文章内容
**主要特性：**
- 根据文章ID获取文章详细信息
- 支持阅读量统计
- 展示文章创建时间、更新时间
- 包含作者信息、分类信息

### 3、文章编辑功能：
**接口：** PUT /api/articles/{id}
**功能描述：** 作者可以编辑自己已发布的文章内容
**主要特性：**
- 支持修改文章标题、内容、分类
- 安全验证：只能编辑自己的文章
- 自动更新修改时间
- 支持状态变更（草稿/发布）

### 4、文章删除功能：
**接口：** DELETE /api/articles/{id}
**功能描述：** 作者可以删除自己的文章，管理员也可以删除文章
**主要特性：**
- 用户删除：只能删除自己的文章
- 管理员删除：可删除任意文章，需要提供删除原因
- 软删除机制，保留数据完整性
- 权限验证和安全检查

### 5、文章列表功能：
**接口：** GET /api/articles/getall
**功能描述：** 获取系统内所有文章的列表，支持分页和排序
**主要特性：**
- 支持分页查询
- 多种排序方式（时间、点赞数、阅读量等）
- 返回文章基本信息
- 支持状态过滤

### 6、文章搜索功能：
**接口：** GET /api/articles/search
**功能描述：** 提供关键词搜索功能，帮助用户快速找到相关文章
**主要特性：**
- 支持关键词搜索
- 高级搜索功能（分类、时间范围等）
- 搜索结果分页
- 搜索结果排序

### 7、文章互动功能：
**接口：**
- POST /api/articles/{id}/like (点赞)
- POST /api/articles/{id}/favorite (收藏)
- POST /api/articles/{id}/read (阅读计数)
**功能描述：** 用户可以对文章进行点赞、收藏等互动操作
**主要特性：**
- 点赞/取消点赞功能
- 收藏/取消收藏功能
- 阅读量统计
- 防重复操作机制

### 8、文章审核功能：
**接口：**
- GET /api/articles/moderation/pending (待审核列表)
- POST /api/articles/{id}/approve (审核通过)
- POST /api/articles/{id}/reject (审核拒绝)
**功能描述：** 管理员对文章进行内容审核管理
**主要特性：**
- 待审核文章列表查看
- 审核通过/拒绝操作
- 审核原因记录
- 审核统计数据

### 9、文章分类管理：
**接口：** GET /api/articles/categories
**功能描述：** 获取文章分类信息
**主要特性：**
- 文章分类列表展示
- 支持按分类筛选文章
- 分类统计信息

### 10、用户文章管理：
**接口：** GET /api/articles/myarticles
**功能描述：** 用户查看自己的文章列表
**主要特性：**
- 查看个人所有文章
- 文章状态展示
- 支持分页查询
- 文章统计数据

## 数据模型

### Article实体包含字段：
- articleId：文章ID
- userId：作者ID
- categoryId：分类ID
- articleTitle：文章标题
- articleContent：文章内容
- articleLink：外部链接
- status：文章状态（0-草稿，1-已发布）
- likesCount：点赞数
- favoritesCount：收藏数
- sponsorsCount：赞助金额
- exposureCount：曝光量
- createdAt：创建时间
- updatedAt：更新时间

## 安全特性

1. **身份验证：** 所有操作都需要用户身份验证
2. **权限控制：** 用户只能操作自己的文章，管理员有额外权限
3. **数据验证：** 对输入数据进行严格验证
4. **SQL注入防护：** 使用参数化查询和输入验证
5. **操作日志：** 记录重要操作的日志信息